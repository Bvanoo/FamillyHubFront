<div class="app">
  <main class="content">

    <header class="header">
      <h1>Randomizer</h1>
      <button class="btn-primary">Historique</button>
    </header>

    <section class="randomizer-layout">

      <div class="card config-window">
        <h2>Configuration</h2>
        
        <div class="mode-selector">
          <button class="mode-btn" [class.active]="mode() === 'cacahuete'" (click)="setMode('cacahuete')">
            <span class="icon"></span>
            <strong>Cacahu√®te</strong>
            <small>Tirage crois√© secret</small>
          </button>
          
          <button class="mode-btn" [class.active]="mode() === 'tache'" (click)="setMode('tache')">
            <span class="icon"></span>
            <strong>T√¢che</strong>
            <small>Assigner un √©lu au hasard</small>
          </button>
        </div>

        <div class="setup-area">
          <div class="input-group">
            <label>Titre de l'√©v√©nement</label>
            <input type="text" [ngModel]="eventTitle()" (ngModelChange)="eventTitle.set($event)" placeholder="Ex: No√´l en famille...">
          </div>
          
          <div class="result-placeholder">
            @if (drawResult()) {
              <p class="winner-text" [class.drawing]="isDrawing()">
                {{ mode() === 'tache' ? 'L\'√©lu(e) est : ' : 'Simulation...' }} 
                <strong>{{ drawResult() }}</strong> 
              </p>
            } @else {
              <p>S√©lectionnez un groupe et lancez le tirage</p>
            }
          </div>
        </div>

        <button class="btn-primary btn-launch" [disabled]="isDrawing()" (click)="launchDraw()">
          {{ isDrawing() ? 'Tirage en cours...' : 'Lancer le tirage' }}
        </button>
      </div>

      <div class="card groups-panel">
        <div class="panel-header">
          <h2>S√©lection du groupe</h2>
        </div>

        <div class="groups-selection-area">
          <div class="input-group">
            <label for="group-picker">Groupe actif</label>
            <select id="group-picker" class="group-select" (change)="onGroupChange($event)">
              <option value="" disabled selected>-- Choisir un groupe --</option>
              
              @for (group of groups; track group.id) {
                <option [value]="group.id">{{ group.name }}</option>
              }
            </select>
          </div>

          <div class="participants-list-container">
            <h3>Membres du groupe ({{ currentMembers.length }})</h3>
            <ul id="participants-list" class="members-display">
              
              @if (currentMembers.length === 0) {
                <li class="placeholder-text">Aucun groupe s√©lectionn√©</li>
              } @else {
                @for (member of currentMembers; track member) {
                  <li>üë§ {{ member }}</li>
                }
              }

            </ul>
          </div>
        </div>

        <button class="btn-secondary">G√©rer les membres</button>
      </div>

    </section>
  </main>
</div>