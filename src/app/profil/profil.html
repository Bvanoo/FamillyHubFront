<div class="profile-wrapper">
  
  <header class="page-header">
    <h1>Mon Profil</h1>
    <button class="btn-danger-sm" (click)="logout()" aria-label="Se déconnecter">
      <i class="fas fa-sign-out-alt"></i> <span class="hide-mobile">Se déconnecter</span>
    </button>
  </header>

  <div class="profile-layout">
    
    <aside class="profile-sidebar">
      <div class="card avatar-card">
        
        <div class="avatar-wrapper" (click)="fileInput.click()" title="Cliquez pour changer la photo">
          <img [src]="urlPic()" alt="Avatar" id="user-avatar" onerror="this.src='FamHubIcon.png'">
          <div class="avatar-overlay">
            <i class="fas fa-camera"></i>
          </div>
        </div>
        
        <input #fileInput type="file" (change)="onFileSelected($event)" accept="image/*" style="display: none;">

        <h2>{{ userData().name }}</h2>
        <p class="user-role">Membre FamilyHub</p>
      </div>
    </aside>

    <section class="profile-details">
      <div class="card">
        <h3 class="section-title">Informations personnelles</h3>
        
        <div class="form-group">
          <label>Nom complet</label>
          <div class="input-wrapper">
            <i class="fas fa-user"></i>
            <input type="text" class="custom-input" name="name" [(ngModel)]="formName" placeholder="Votre nom">
          </div>
        </div>

        <div class="form-group">
          <label>E-mail</label>
          <div class="input-wrapper">
            <i class="fas fa-envelope"></i>
            <input type="email" class="custom-input readonly-input" name="email" [value]="userData().email" readonly title="L'email ne peut pas être modifié">
          </div>
        </div>

        <div class="actions-row">
          <button class="btn-primary" (click)="saveChanges()" [disabled]="isSaving">
            @if (!isSaving) {
              <i class="fas fa-save"></i>
            }
            @if (isSaving) {
              <i class="fas fa-spinner fa-spin"></i>
            }
            {{ isSaving ? 'Sauvegarde en cours...' : 'Enregistrer les modifications' }}
          </button>
        </div>

      </div>
    </section>

  </div>
</div>