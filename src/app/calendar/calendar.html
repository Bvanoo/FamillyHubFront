<div class="app-container">
  <main class="content-area">
    <header class="page-header">
      <h1>üìÖ Planning & Dispos</h1>
      <div class="header-actions">
        <button class="btn-secondary">Exporter</button>
        <button class="btn-primary" (click)="saveToDatabase()">Enregistrer en base</button>
      </div>
    </header>

    <section class="calendar-layout">
      <aside class="card sidebar-config">
        <div class="config-section">
          <h3>Instructions</h3>
          <p class="instruction-text">
            Cliquez et glissez sur le calendrier pour d√©finir une plage de disponibilit√©.
            Les blocs sont divis√©s par tranche de <strong>2 heures</strong>.
          </p>
        </div>

        <div class="config-section status-legend">
          <h3>L√©gende</h3>
          <ul>
            <li><span class="badge blue"></span> Travail / Disponible</li>
            <li><span class="badge yellow"></span> Perso / Partiel</li>
            <li><span class="badge red"></span> Urgent / Indisponible</li>
          </ul>
        </div>
      </aside>

      <div class="card calendar-card">
        <full-calendar [options]="calendarOptions"></full-calendar>
      </div>
    </section>
  </main>

  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
    <div class="card modal-box" (click)="$event.stopPropagation()">

      <h2>{{ isEditMode ? 'Modifier l\'√©v√©nement' : 'Nouvel √©v√©nement' }}</h2>

      <div class="modal-body">
        <div class="input-group">
          <label>Type de bloc</label>
          <select class="custom-input" [(ngModel)]="tempEvent.type">
            <option value="Disponible">Disponible</option>
            <option value="Partiel">Partiel</option>
            <option value="Urgent">Indisponibilit√© Urgente</option>
          </select>
        </div>

        <div class="input-group">
          <label>Motif (Optionnel)</label>
          <input type="text" class="custom-input" [(ngModel)]="tempEvent.title" placeholder="Ex: Cong√©s, Formation...">
        </div>

        <div class="color-picker-group">
          <label>Couleurs rapides (L√©gende)</label>
          <div class="color-presets">
            <div class="color-swatch" [style.background-color]="'#3b82f6'"
              [class.active]="tempEvent.color === '#3b82f6'" (click)="tempEvent.color = '#3b82f6'">
            </div>
            <div class="color-swatch" [style.background-color]="'#10b981'"
              [class.active]="tempEvent.color === '#10b981'" (click)="tempEvent.color = '#10b981'">
            </div>
            <div class="color-swatch" [style.background-color]="'#f59e0b'"
              [class.active]="tempEvent.color === '#f59e0b'" (click)="tempEvent.color = '#f59e0b'">
            </div>
          </div>

          <div class="custom-color-section">
            <label>Couleur personnalis√©e</label>
            <input type="color" class="rect-color-input" [(ngModel)]="tempEvent.color" name="colorPicker">
          </div>
        </div>

        <div class="modal-footer">
          <button *ngIf="isEditMode" class="btn-danger" (click)="deleteEvent()">
            Supprimer
          </button>

          <div class="right-actions">
            <button class="btn-cancel" (click)="closeModal()">Annuler</button>
            <button class="btn-primary" (click)="saveEvent()">
              {{ isEditMode ? 'Mettre √† jour' : 'Cr√©er l\'√©v√©nement' }}
            </button>
          </div>
        </div>

      </div>
    </div>
  </div>